---
layout: default
---

{%- comment -%}
  Project detail layout (readable).
  Each project page (.md) must set `slug:` in its front matter,
  matching an item in `_data/projects.yml`.
{%- endcomment -%}

{%- assign project = site.data.projects | where: "slug", page.slug | first -%}
{%- assign title_fallback = page.title | default: (project and project.title) | default: page.slug -%}

<div class="page-hero">
  <div class="container">
    <div class="breadcrumbs">
      <a href="{{ '/' | relative_url }}">Home</a> ·
      <a href="{{ '/research/projects/' | relative_url }}">Research</a> ·
      Projects
    </div>
    <h1 class="page-title">{{ title_fallback }}</h1>
    {%- if project and project.summary -%}
      <p class="muted">{{ project.summary }}</p>
    {%- endif -%}
  </div>
</div>

<main class="container">
  {%- if project -%}
  <article class="grid" style="row-gap:24px">
    <!-- ===== Main column ===== -->
    <div style="grid-column: span 8">

      <!-- Meta bar (moved to top; image removed) -->
      <section class="card card-pad" style="margin-bottom:12px">
        <div class="proj-meta">
          {%- if project.period -%}
            <div class="meta-item">
              <div class="meta-label">Period</div>
              <div class="meta-value">{{ project.period }}</div>
            </div>
          {%- endif -%}

          {%- if project.category -%}
            <div class="meta-item">
              <div class="meta-label">Category</div>
              <div class="meta-value">{{ project.category }}</div>
            </div>
          {%- endif -%}

          {%- if project.tags and project.tags.size > 0 -%}
            <div class="meta-item">
              <div class="meta-label">Tags</div>
              <div class="meta-chips">
                {%- for t in project.tags -%}
                  <span class="chip">{{ t }}</span>
                {%- endfor -%}
              </div>
            </div>
          {%- endif -%}

          {%- if project.url or project.external -%}
            <div class="meta-item meta-actions">
              {%- if project.url -%}
                {%- assign is_external = project.url contains '://' -%}
                <a class="btn-link"
                   href="{{ is_external | default: false | ternary: project.url, project.url | relative_url }}"
                   target="{{ is_external | default: false | ternary: '_blank','_self' }}"
                   rel="noopener">Project Link</a>
              {%- endif -%}
              {%- if project.external -%}
                <a class="btn-link" href="{{ project.external }}" target="_blank" rel="noopener">External</a>
              {%- endif -%}
            </div>
          {%- endif -%}
        </div>
      </section>

      <!-- 프로젝트별 .md 본문 -->
      <div class="prose">
        {{ content }}
      </div>
    </div>

    <!-- ===== Sidebar ===== -->
    <aside style="grid-column: span 4">
      <div class="card card-pad" style="margin-top:0">
        <a href="{{ '/research/projects/' | relative_url }}" class="button">← Back to Projects</a>
      </div>
    </aside>
  </article>

  {%- else -%}
    <div class="card card-pad" style="margin-top:16px">
      <strong>Heads up:</strong>
      No project with slug <code>{{ page.slug }}</code> was found in <code>_data/projects.yml</code>.
      Make sure the page’s front matter has a matching <code>slug</code>.
    </div>
    <div class="prose" style="margin-top:12px">
      {{ content }}
    </div>
  {%- endif -%}
</main>

<!-- Minimal styles for readable meta -->
<style>
  .proj-meta{
    display:grid;
    grid-template-columns: repeat(12, 1fr);
    gap:12px;
  }
  .meta-item{
    border:1px solid var(--line);
    border-radius:10px;
    padding:8px 10px;
    background:#fff;
    min-height:48px;
    display:flex;
    flex-direction:column;
    justify-content:center;
  }
  .meta-label{ font-size:12px; color:#6b7280; line-height:1.2; }
  .meta-value{ font-size:14px; font-weight:600; line-height:1.3; }

  .meta-chips{ display:flex; flex-wrap:wrap; gap:6px; }
  .chip{
    display:inline-block; border:1px solid #e3e3e3; border-radius:999px;
    padding:2px 8px; font-size:12px; background:#fff;
  }

  /* placement */
  .proj-meta > .meta-item:nth-child(1){ grid-column: span 3; min-width:160px; }
  .proj-meta > .meta-item:nth-child(2){ grid-column: span 3; min-width:160px; }
  .proj-meta > .meta-item:nth-child(3){ grid-column: span 5; }
  .proj-meta > .meta-item.meta-actions{
    grid-column: span 1; display:flex; align-items:center; justify-content:flex-end; gap:8px;
  }

  .btn-link{
    display:inline-block; padding:6px 10px; border-radius:10px; border:1px solid var(--line);
    text-decoration:none; font-size:14px; line-height:1.2; background:#fff;
  }

  @media (max-width: 1000px){
    .proj-meta{ grid-template-columns: 1fr 1fr; }
    .proj-meta > .meta-item,
    .proj-meta > .meta-item.meta-actions{ grid-column: span 1 !important; justify-content:flex-start; }
  }
</style>
