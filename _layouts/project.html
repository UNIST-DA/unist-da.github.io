---
layout: default
---

{%- comment -%}
  Project detail layout (clean vertical; organizer/participants + tags split).
  Each project page (.md) should set `slug:` in front matter,
  which matches an item in `_data/projects.yml`.
{%- endcomment -%}

{%- assign project = site.data.projects | where: "slug", page.slug | first -%}
{%- assign title_fallback = page.title | default: (project and project.title) | default: page.slug -%}

<div class="page-hero">
  <div class="container">
    <div class="breadcrumbs">
      <a href="{{ '/' | relative_url }}">Home</a> ·
      <a href="{{ '/research/projects/' | relative_url }}">Projects</a>
    </div>
    <h1 class="page-title" style="margin-bottom:4px">{{ title_fallback }}</h1>
    {%- if project and project.summary -%}
      <p class="muted" style="margin:0">{{ project.summary }}</p>
    {%- endif -%}
  </div>
</div>

<style>
  /* ===== minimal project page ===== */
  .proj-wrap{ max-width:900px; margin:0 auto; }
  .proj-meta{ margin:10px 0 0; display:flex; flex-wrap:wrap; gap:10px 14px; align-items:center; }
  .pill{ display:inline-flex; align-items:center; gap:6px; padding:2px 10px; border:1px solid #e5e7eb; border-radius:999px; font-size:12px; color:#374151; background:#fff; }
  .pill-label{ color:#6b7280; font-weight:500; margin-right:-2px; }
  .pill-compact{ padding:2px 8px; }
  .proj-period{ color:#6b7280; font-size:13px; }
  /* tags line (ghost/transparent chips) */
  .proj-tags{ margin:6px 0 18px; display:flex; flex-wrap:wrap; gap:6px; }
  .tag-ghost{ display:inline-flex; align-items:center; padding:2px 8px; border:1px solid #e5e7eb; border-radius:999px; font-size:12px; color:#6b7280; background:transparent; }

  .proj-sep{ height:1px; background:#f0f2f5; border:0; margin:14px 0 24px; }
  .proj-hero-img{ width:100%; height:auto; border-radius:10px; object-fit:cover; margin:0 0 8px; }
  .proj-caption{ margin:4px 0 18px; color:#6b7280; font-size:14px; }
  .proj-links{ margin:22px 0 0; padding:0; list-style:none; }
  .proj-links li+li{ margin-top:6px; }
  .proj-links a{ text-decoration:none; color:inherit; display:inline-flex; align-items:center; gap:8px; }
  .proj-links svg{ flex:0 0 auto }
  @media (max-width: 720px){
    .proj-wrap{ padding:0 2px; }
  }
</style>

<main class="container">
  {%- if project -%}
  <article class="proj-wrap">

    <!-- Meta row 1: Organizer / Participants / Category / Period -->
    <div class="proj-meta">
      {%- assign organizer = page.organizer | default: project.organizer -%}
      {%- assign participants = page.participants | default: project.participants -%}
      {%- assign category = page.category   | default: project.category -%}
      {%- assign period   = page.period     | default: project.period -%}

      {%- if organizer -%}
        <span class="pill"><span class="pill-label">Organizer</span>{{ organizer }}</span>
      {%- endif -%}

      {%- if participants and participants.size -%}
        <span class="pill">
          <span class="pill-label">Participants</span>
          {{ participants | join: ", " }}
        </span>
      {%- endif -%}

      {%- if category -%}
        <span class="pill pill-compact">{{ category }}</span>
      {%- endif -%}

      {%- if period -%}
        <span class="proj-period">{{ period }}</span>
      {%- endif -%}
    </div>

    <!-- Meta row 2: Tags (transparent chips) -->
    {%- assign tags = page.tags | default: project.tags -%}
    {%- if tags and tags.size > 0 -%}
      <div class="proj-tags">
        {%- for t in tags -%}
          <span class="tag-ghost">{{ t }}</span>
        {%- endfor -%}
      </div>
    {%- endif -%}

    <hr class="proj-sep">

    {%- if project.image or page.image -%}
      <img class="proj-hero-img"
           src="{{ (page.image | default: project.image) | relative_url }}"
           alt="{{ project.title | default: title_fallback }}">
      {%- if project.image_caption or page.image_caption -%}
        <p class="proj-caption">{{ page.image_caption | default: project.image_caption }}</p>
      {%- endif -%}
    {%- endif -%}

    <!-- Project body (.md content) -->
    <div class="prose">
      {{ content }}
    </div>

    {%- if project.url or project.external or project.repo or project.links -%}
      <ul class="proj-links">
        {%- if project.url -%}
          {%- assign is_external = project.url contains '://' -%}
          <li>
            <a href="{{ is_external | default: false | if true project.url else project.url | relative_url }}"
               target="_blank" rel="noopener">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 13a5 5 0 0 1 7 0l1 1a5 5 0 0 1-7 7l-1-1"/>
                <path d="M14 11a5 5 0 0 1-7 0l-1-1a5 5 0 0 1 7-7l1 1"/>
              </svg>
              <span>Project Link</span>
            </a>
          </li>
        {%- endif -%}
        {%- if project.external -%}
          <li>
            <a href="{{ project.external }}" target="_blank" rel="noopener">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <path d="M15 3h6v6"/>
                <path d="M10 14L21 3"/>
              </svg>
              <span>External</span>
            </a>
          </li>
        {%- endif -%}
        {%- if project.repo -%}
          <li>
            <a href="{{ project.repo }}" target="_blank" rel="noopener">
              <svg viewBox="0 0 16 16" width="18" height="18" fill="currentColor">
                <path d="M8 0C3.58 0 0 3.58 0 8a8 8 0 005.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.5-1.07C3.77 10.98 2 10.29 2 7.23c0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.11 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.91.08 2.11.51.56.82 1.27.82 2.15 0 3.06-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8 8 0 0016 8c0-4.42-3.58-8-8-8z"/>
              </svg>
              <span>Source</span>
            </a>
          </li>
        {%- endif -%}
        {%- if project.links and project.links.size > 0 -%}
          {%- for l in project.links -%}
            <li><a href="{{ l.url }}" target="_blank" rel="noopener">{{ l.label | default: l.url }}</a></li>
          {%- endfor -%}
        {%- endif -%}
      </ul>
    {%- endif -%}
  </article>

  {%- else -%}
  <article class="proj-wrap">
    <p><strong>Heads up:</strong> No project with slug <code>{{ page.slug }}</code> was found in <code>_data/projects.yml</code>.
    Make sure the page’s front matter has a matching <code>slug</code>.</p>
    <div class="prose">{{ content }}</div>
  </article>
  {%- endif -%}
</main>
